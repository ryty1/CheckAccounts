<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>账号检测</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        textarea { width: 100%; height: 150px; }
        .result { margin-top: 20px; white-space: pre-wrap; word-wrap: break-word; }
    </style>
</head>
<body>
    <h1>批量账号检测</h1>
    <form id="accountForm">
        <label for="accounts">请输入账号，每行一个：</label><br>
        <textarea id="accounts" name="accounts"></textarea><br><br>
        <button type="submit">提交</button>
    </form>

    <div id="loading" style="display: none;">正在检测，请稍候...</div>
    <div id="result" class="result" style="display: none;"></div>

    <script>
        document.getElementById('accountForm').addEventListener('submit', function(e) {
            e.preventDefault();

            const accountsInput = document.getElementById('accounts').value.trim();
            if (!accountsInput) {
                alert('请输入至少一个账号');
                return;
            }

            const accounts = accountsInput.split('\n').map(account => account.trim());
            if (accounts.length === 0) {
                alert('请输入有效的账号');
                return;
            }

            document.getElementById('loading').style.display = 'block';
            document.getElementById('result').style.display = 'none';

            // 发送请求到后端
            fetch('/checkAccounts.php', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ accounts })
            })
            .then(response => response.text())  // 这里用 text() 处理纯文本返回
            .then(data => {
                document.getElementById('loading').style.display = 'none';
                const resultDiv = document.getElementById('result');
                resultDiv.textContent = data;  // 直接显示返回的纯文本结果
                resultDiv.style.display = 'block';
            })
            .catch(error => {
                document.getElementById('loading').style.display = 'none';
                alert('请求失败，请稍后再试');
            });
        });
    </script>
</body>
</html>